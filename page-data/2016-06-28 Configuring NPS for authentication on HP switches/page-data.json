{"componentChunkName":"component---src-templates-blog-post-js","path":"/2016-06-28 Configuring NPS for authentication on HP switches/","webpackCompilationHash":"04c9b1c30955a8ce71b4","result":{"data":{"site":{"siteMetadata":{"title":"Eric Haskins","author":"Eric Haskins"}},"markdownRemark":{"id":"47707d8d-5f71-5851-bc04-91d6aeb7b3cb","html":"<h1>Prereqs</h1>\n<p>I’m assuming you have the NPS role installed on a Windows server, and a switch configured to the point where it can communicate with (can ping) the NPS server.</p>\n<h1>Setup NPS</h1>\n<h2>Create RADIUS Client</h2>\n<p>Create a new RADIUS client as follows:</p>\n<ul>\n<li>\n<p>Friendly Name - Anything you want</p>\n<ul>\n<li>Switches</li>\n</ul>\n</li>\n<li>\n<p>IP Address - The address of a specific switch, or the subnet that contains all your switch in CIDR format.</p>\n<ul>\n<li>10.0.1.0/24</li>\n</ul>\n</li>\n<li>Shared Secret - A 32 char (or less) secret. You’ll need it later.</li>\n</ul>\n<h2>Create the Connection Request Policy</h2>\n<p>Create a new Connection Request Policy with the following settings:</p>\n<ul>\n<li>Name - Switch Connection Policy</li>\n<li>Type of server</li>\n<li>Unspecified</li>\n<li>Conditions - Add the following</li>\n<li>Client Friendly Name = Friendly Name from above</li>\n</ul>\n<h2>Create Network Policy</h2>\n<p>Create a new network policy with:</p>\n<ul>\n<li>Name - Anything you’d like</li>\n<li>Switch Admin Policy</li>\n<li>Type of server</li>\n<li>Unspecified</li>\n<li>Conditions:</li>\n<li>Windows Group - Used to filter to only admin users</li>\n<li>Add it and select an appropriate security group to have access to the switches.</li>\n<li>Client Friendly Name - Limit this policy to your switches. Use the friendly name from the RADIUS client.</li>\n<li>Switches</li>\n<li>\n<p>Permissions</p>\n<ul>\n<li>Access granted</li>\n</ul>\n</li>\n<li>EAP Types</li>\n<li>Add PEAP</li>\n<li>Less Secure authentication methods</li>\n<li>Unselect all</li>\n<li>Under RADIUS Attributes>Standard</li>\n<li>Set Service-Type to Administrative (under “Others” drop-down)</li>\n</ul>\n<h1>Configure Switch</h1>\n<p>Here are the relevant commands for the switch. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">;Disable the telnet server since we don&#39;t want domain creds flying around in plain text\nno telnet-server\n\n;Setup the RADIUS server info\nradius-server host &lt;NPS Server IP&gt;\nradius-server key &quot;&lt;Your Secret Key from the RADIUS Client in NPS&gt;&quot;\n\n;Set switch to go immediately to enable mode once authenticated\naaa authentication login privilege-mode\n\n;Configure specific interfaces to use the RADIUS server\naaa authentication web login peap-mschapv2\naaa authentication web enable peap-mschapv2\naaa authentication ssh login peap-mschapv2\naaa authentication ssh enable peap-mschapv2\n\n;I omitted console since I want a backdoor in case of network issues, and have adequate physical access controls\n;aaa authentication console login peap-mschapv2 local\n;aaa authentication console enable peap-mschapv2 local</code></pre></div>","frontmatter":{"title":"Configuring NPS for authentication on HP switches","date":"June 28, 2016"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016-06-28 Configuring NPS for authentication on HP switches/"}}}