{"componentChunkName":"component---src-templates-blog-post-js","path":"/2015-07-27 Docker in Hyper-V on Windows 10/","webpackCompilationHash":"04c9b1c30955a8ce71b4","result":{"data":{"site":{"siteMetadata":{"title":"Eric Haskins","author":"Eric Haskins"}},"markdownRemark":{"id":"fe5d54be-cd6b-5900-9833-b59470466d02","html":"<p>These are my notes for setting up docker on Windows 10 10240. Don’t take them\nas any more.</p>\n<p>I run all of this from a Git Shell PowerShell instance since that’ll have SSH\nand git available. The only exception is the actual creation command, which has\nto be run from an Administrative instance.</p>\n<h1>Prep</h1>\n<ul>\n<li>Install Hyper-V</li>\n</ul>\n<h2>Download Docker-Machine and Docker</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mkdir c:\\docker\ncd c:\\docker\nInvoke-WebRequest -Uri https://get.docker.com/builds/Windows/x86_64/docker-latest.exe  -OutFile docker.exe\nInvoke-WebRequest -Uri https://github.com/docker/machine/releases/download/v0.3.0/docker-machine_windows-amd64.exe -OutFile docker-machine.exe</code></pre></div>\n<h2>Add docker folder to path for future PS instances</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Add-Content -Path $profile -Value &#39;$env:path += &quot;;c:\\docker\\&quot;&#39;\n$env:path += &quot;;c:\\docker\\&quot;</code></pre></div>\n<h1>Create Docker VM</h1>\n<p>You need to run this from an Administrative PowerShell instance, or you’ll get very unhelpful errors.</p>\n<p>If you don’t have a VMSwitch created yet, you’ll need to do that. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#Create a new VMSwitch connected to the first connected NIC\nNew-VMSwitch -Name External -NetAdapterName (Get-NetAdapter | ? {$_.Status -eq &#39;Up&#39;} | Select -First 1).Name\n\n#Create the Docker VM\ndocker-machine create --driver hyper-v dev</code></pre></div>\n<h1>Setup for environment for connection with Docker cli</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Add environment variables docker expects\ndocker-machine env dev | Invoke-Expression\n\n# List containers in your Docker VM\ndocker ps</code></pre></div>\n<h1>See it do something!</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker run hello-world</code></pre></div>\n<h1>Misc. commands I’ll want to remember</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Prints available machines to manage\ndocker-machine ls\n\n# Get IP of Docker VM\ndocker-machine ip dev\n\n# Start machine\ndocker start dev\n\n# Stop machine\ndocker-machine stop\n\n# Add environment variables docker expects\ndocker-machine env --shell powershell dev | Invoke-Expression\n\n# List containers in your Docker VM\ndocker ps</code></pre></div>","frontmatter":{"title":"Docker in Hyper-V on Windows 10","date":"July 27, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2015-07-27 Docker in Hyper-V on Windows 10/"}}}